<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>HACO äºˆç´„ãƒšãƒ¼ã‚¸</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .reservation-form {
      max-width: 400px;
      margin: auto;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>

<h1>ğŸ“… å®¶é›»ãƒ¬ãƒ³ã‚¿ãƒ«äºˆç´„</h1>

<div class="reservation-form">
  <p class="reservation-text">å®¶é›»ã‚’äºˆç´„ã—ã¾ã™ã‹ï¼Ÿ</p>

  <label>å—å–æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„:</label>
  <input type="date" id="pickupDate">

  <label>è¿”å´æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„:</label>
  <input type="date" id="returnDate">

  <button onclick="confirmReservation()">äºˆç´„ç¢ºå®š</button>
</div>

<script>
  // --- å•†å“åã‚’URLã‹ã‚‰å–å¾— ---
  function getItemFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get('item') || 'å®¶é›»';
  }

  const itemName = getItemFromUrl();
  const reservationText = document.querySelector('.reservation-text');
  reservationText.textContent = `${itemName}ã‚’äºˆç´„ã—ã¾ã™ã‹ï¼Ÿ`;

  // --- äºˆç´„ç¢ºå®šå‡¦ç†ï¼ˆè¤‡æ•°ä¿å­˜å¯¾å¿œï¼‰ ---
  function confirmReservation() {
    const pickup = document.getElementById('pickupDate').value;
    const ret = document.getElementById('returnDate').value;

    if (!pickup || !ret) {
      alert('å—å–æ—¥ã¨è¿”å´æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼');
      return;
    }

    const reservationData = {
      item: itemName,
      pickupDate: pickup,
      returnDate: ret,
      createdAt: new Date().toISOString()
    };

    // æ—¢å­˜ã®å±¥æ­´ã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°ç©ºé…åˆ—ï¼‰
    const existingRaw = localStorage.getItem('reservationHistory');
    const history = existingRaw ? JSON.parse(existingRaw) : [];

    // é…åˆ—ã«è¿½åŠ ã—ã¦ä¿å­˜
    history.push(reservationData);
    localStorage.setItem('reservationHistory', JSON.stringify(history));

    // å®Œäº†ãƒšãƒ¼ã‚¸ã¸é·ç§»
    window.location.href = "thankyou.html";
  }
</script>

</body>
</html>
