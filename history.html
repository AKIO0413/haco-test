<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>äºˆç´„å±¥æ­´</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    h1 {
      text-align: center;
      color: #4CAF50;
    }
    .history-list {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
    }
    .history-item {
      border-bottom: 1px solid #ccc;
      padding: 10px 0;
    }
    .history-item:last-child {
      border-bottom: none;
    }
  </style>
</head>
<body>

<h1>ğŸ“˜ äºˆç´„å±¥æ­´</h1>

<div class="history-list" id="historyList">
  <p>å±¥æ­´ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
</div>

<script>
  function renderHistory() {
    const historyContainer = document.getElementById('historyList');
    const raw = localStorage.getItem('reservationHistory');

    if (!raw) {
      historyContainer.innerHTML = "<p>äºˆç´„å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
      return;
    }

    let history;
    try {
      history = JSON.parse(raw);
    } catch (e) {
      console.error("å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ", e);
      historyContainer.innerHTML = "<p>å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãŒå£Šã‚Œã¦ã„ã¾ã™ã€‚</p>";
      return;
    }

    if (!Array.isArray(history) || history.length === 0) {
      historyContainer.innerHTML = "<p>äºˆç´„å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
      return;
    }

    const html = history
      .map(data => `
        <div class="history-item">
          <strong>å•†å“:</strong> ${data.item}<br>
          <strong>å—å–æ—¥:</strong> ${data.pickupDate}<br>
          <strong>è¿”å´æ—¥:</strong> ${data.returnDate}<br>
          <small>${new Date(data.createdAt).toLocaleString()}</small>
        </div>
      `)
      .join("");

    historyContainer.innerHTML = html;
  }

  window.addEventListener('DOMContentLoaded', renderHistory);
</script>


</body>
</html>
